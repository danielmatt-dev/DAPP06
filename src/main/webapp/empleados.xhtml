<!DOCTYPE html>
<html lang="es"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head><title>Empleados</title></h:head>
<h:body>
    <h:form id="empleadosForm">
        <p:growl id="msgs"/>
        <p:commandButton value="Nuevo" update=":dlgForm"
                         actionListener="#{empleadoBean.nuevo}" oncomplete="PF('dlg').show()"/>
        <p:dataTable id="tabla" value="#{empleadoBean.empleados}" var="e">
            <p:column headerText="Clave">#{e.clave}</p:column>
            <p:column headerText="Nombre">#{e.nombre}</p:column>
            <p:column headerText="Acciones">
                <p:commandButton value="Editar" update=":dlgForm"
                                 oncomplete="PF('dlg').show()">
                    <f:setPropertyActionListener value="#{e}"
                                                 target="#{empleadoBean.seleccionado}"/>
                </p:commandButton>
                <p:commandButton value="Eliminar"
                                 actionListener="#{empleadoBean.eliminar}" update=":empleadosForm:tabla :empleadosForm:msgs">
                    <f:setPropertyActionListener value="#{e}"
                                                 target="#{empleadoBean.seleccionado}"/>
                </p:commandButton>
            </p:column>
        </p:dataTable>
    </h:form>
    <p:dialog header="Empleado" widgetVar="dlg" modal="true">
        <h:form id="dlgForm">
            <h:panelGrid columns="2">
                <h:outputLabel value="Nombre:" for="nombre"/>
                <p:inputText id="nombre" value="#{empleadoBean.seleccionado.nombre}"/>
                <h:outputLabel value="Dirección:" for="direccion"/>
                <p:inputText id="direccion"
                             value="#{empleadoBean.seleccionado.direccion}"/>
                <h:outputLabel value="Teléfono:" for="telefono"/>
                <p:inputText id="telefono"
                             value="#{empleadoBean.seleccionado.telefono}"/>
            </h:panelGrid>
            <p:commandButton value="Guardar" actionListener="#{empleadoBean.guardar}"
                             update=":empleadosForm:tabla :empleadosForm:msgs"
                             oncomplete="PF('dlg').hide()" />
        </h:form>
    </p:dialog>
</h:body>
</html>